<!DOCTYPE html>
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Substantial   
Description: A two-column, fixed-width design for 1024x768 screen resolutions.
Version    : 1.0
Released   : 20100522

-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Winging It</title>
    <meta name="author" content="Tim Wingfield" />
    <link href="/stylesheets/style.css" rel="stylesheet" type="text/css" media="screen" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23516986-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div id="header">
      <div id="menu">
        <ul>
          <li><a href="/" class="first">Home</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/contact.html">Contact</a></li>
        </ul>   
      </div>
      <div id="search"></div>
    </div>
    <div id="logo">
      <h1><a href="/">Winging It</a></h1>
      <p>
        <img src="http://www.gravatar.com/avatar/1f178e90d4b441b3a1103254a5b3392a.jpg?s=50" />
        <em>Here's what I got...</em>
      </p>
    </div>
    <hr />
    <div id="page">
      <div id="content">
        <div id="content-bgtop">
          <div id="content-bgbtm">
            <div id="home">
  
    <div>
    
    <div class="timestamp">Tuesday, June 16, 2009</div>

    <h2 class="index-link"><a href="/2009/06/16/indynda-recap-and-covering-the-modelbinder.html">IndyNDA Recap and Covering the ModelBinder</a></h2>
    <div class="post">

  <h2>IndyNDA Recap and Covering the ModelBinder</h2>

<p>I want to thank all that attended my MVC presentation in Indy last week. I had a great time speaking, and even though I left a portion of my code sample out (model binders, which I’ll cover below), I thought it went well and I got some good questions during and after. I apologize for leaving it out of the talk, but I get to write a little blog post about it.</p>

<p>A couple housekeeping things before I cover the ModelBinder part I missed.</p>

<p>During the post talk talking, <a href="http://twitter.com/daveleininger">Dave</a> asked me about a grid option in MVC. One we’ve been using is <a href="http://flexigrid.info/">Flexigrid</a>. It will do paging and sorting on its own, and will call back to your controller on its own for a little JSON. The big gotcha here is it runs on an older version of jQuery, which bit us in the butt on Friday on our project.</p>

<p>The blog post that contains the code and explanation…well better explanation than, “I copied and pasted and it worked,” on the partial views is on <a href="http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/">Steve Sanderson’s blog</a>.</p>

<p>Now on to the part I forgot…</p>

<h3>ModelBinder</h3>

<p>I’m still feeling bad for not sharing this part. I got a question about it after the presentation, and that’s when I realized I totally forgot the edit page, which was going to demonstrate the ModelBinder. (Among other things, like the FluentHTML controls.)</p>

<p>If you have the code form above, the files in play here are InventoryController.cs and Edit.aspx. AssaultItemEditModel.cs is the object passed, but it’s just a property bag.</p>

<p>For the Reader’s Digest version: the ModelBinder works on the premise of convention over configuration, so the naming of your fields matter in that they have to match the property names of the object you want to bind to.</p>

<p>For the example I missed, we had the edit model that we wanted to bind to:</p>

<pre><code>public class AssaultItemEditModel 
{ 
    public virtual int Id { get; set; } 
    public virtual string Type { get; set; } 
    public virtual string Description { get; set; } 
    public virtual int LoadValue { get; set; }
}
</code></pre>

<p>The view had the form fields hooked to that edit model through the Fluent HTML controls from MVC Contrib.</p>

<pre><code>&lt;% Html.BeginForm("Save", "Inventory");%&gt;
    &lt;h2&gt;Edit &lt;%=Html.Encode(Model.Type) %&gt;&lt;/h2&gt; 
    &lt;%=this.Hidden(x =&gt; x.Id) %&gt; 
    &lt;ul class="details"&gt; 
        &lt;li&gt;&lt;span&gt;Type: &lt;/span&gt;&lt;%=this.TextBox(x =&gt; x.Type) %&gt;&lt;/li&gt; 
        &lt;li&gt;&lt;span&gt;Description: &lt;/span&gt;&lt;%=this.TextBox(x =&gt; x.Description) %&gt;&lt;/li&gt; 
        &lt;li&gt;&lt;span&gt;Load Value: &lt;/span&gt;&lt;%=this.TextBox(x =&gt; x.LoadValue) %&gt;&lt;/li&gt; 
        &lt;li&gt;&lt;%=this.SubmitButton("Save") %&gt;&lt;/li&gt; 
    &lt;/ul&gt; 
&lt;% Html.EndForm();%&gt;`
</code></pre>

<p>And finally, the controller method that’s going to process it all. Rather than taking in the standard id, it takes in a model object to which it will do all the Request.Form for you and hook the form values up to the object properties.</p>

<pre><code>[AcceptVerbs(HttpVerbs.Post)] 
public ActionResult Save(AssaultItemEditModel item) 
{ 
     //do save 
     var assaultItem = new AssaultItem(item.Id) 
         { 
             Description = item.Description,
             Type = item.Type,
             LoadValue = item.LoadValue 
         };

     Service.SaveAssaultItem(assaultItem);

     var message = "Item saved successfully.";

     return this.RedirectToAction(x =&amp;gt; x.Index(message)); 
}
</code></pre>

<p>Don’t mind my extra step on newing up an object with the id as a parameter, that’s due to the way I hooked up <a href="http://fluentnhibernate.org/">Fluent nHibernate</a> at the start. Basically, to generate my maps from my domain objects, the id gets a private setter as convention. So, to get the right object to save, I had to set up the constructor to take an id argument. I cut some corners to get the demo app out the door. (John, you may hit me with, “Quicker does not equal better,” as soon as you read this.)</p>

<p>The other way around that is to not use my domain objects in my views, but that’s another discussion.</p>

<p>Under the hood where the magic happens, I haven’t dug too deep. But, I use this daily and it works swimmingly. You don’t even have to take in the model the view is bound to, just have the form fields match the model you’re taking in. I don’t recommend doing ad hoc model binding, in practice we set our edit model as a child of the view model.</p>

<p>I feel bad that I didn’t get this up on the screen, because it’s some fun stuff to show off.</p>

  <div class="disqus-link"><a href="http://blog.timwingfield.com/2009/06/16/indynda-recap-and-covering-the-modelbinder.html#disqus-thread">Comments >></a></div>

</div>

    </div>
  
    <div>
    
    <div class="timestamp">Wednesday, June 10, 2009</div>

    <h2 class="index-link"><a href="/2009/06/10/now-batting-leadoff-for-codestock.html">Now Batting Leadoff for CodeStock...</a></h2>
    <div class="post">

  <h2>Now Batting Leadoff for CodeStock...</h2>

<p>I am honored to have been selected to speak at <a href="http://codestock.org/">CodeStock</a> and will be delivering having my Kanban conversation in the great state of Tennessee. I’m really looking forward to this as I didn’t make CodeStock last summer, and it looks like a great two day event. The good folks that have organized the conference have slotted me in one of the opening sessions on Friday, so we’ll get our Lean on early in the conference.</p>

<p>There are a number of sessions I’m looking forward to, and since mine is over early I should get to a bunch of them. But, as with any regional conference, I’m looking forward to the hallway sessions as well.</p>

<p>If you’re thinking about going, go get registered, it looks like it’s going to be a good time.</p>

  <div class="disqus-link"><a href="http://blog.timwingfield.com/2009/06/10/now-batting-leadoff-for-codestock.html#disqus-thread">Comments >></a></div>

</div>

    </div>
  
    <div>
    
    <div class="timestamp">Monday, June  8, 2009</div>

    <h2 class="index-link"><a href="/2009/06/08/but-webforms-did-that-for-me.html">But WebForms did that FOR me.</a></h2>
    <div class="post">

  <h2>"But WebForms did that FOR me."</h2>

<p>While working with the model binder the other day, the statement in the title was made by one of the guys on my team. It’s not an unreasonable statement, but I think it spells out an important distinction between traditional ASP.Net WebForm development and using the new, shiny ASP.Net MVC framework.</p>

<p>The point in question was in posting an object after edit, the id didn’t automatically come through. The model binders do some magic under the hood, and it’s welcome magic in my opinion as I’ll gladly leave Request.Form back with Classic ASP. However, you still have to tell the model binder the whole story, it’s not done for you anymore. (Nor was it done for you before WebForms.)</p>

<p>Solution to our little problem: Stash the object id in a hidden form field. (Yes, I know, right click and view source and there’s my object id.) Once looked down upon in WebForms development…well, other than that one GIANT hidden form field called “ViewState”…the hidden field looks to be making a quiet comeback.</p>

<p>Basically, if you want the model binder to find all the bits to your object, you have to make it available when the page posts. So, it needs to be in the form somewhere.</p>

<p>Personally, I don’t see this as a step backwards, but I grew up in the salad days of request/response. Having to provide that info so you can get it back seems normal. The flip side is also true: if you don’t need it, you don’t have to add it.</p>

<p>The more I work with ASP.Net MVC, the more I fall in love with it.</p>

  <div class="disqus-link"><a href="http://blog.timwingfield.com/2009/06/08/but-webforms-did-that-for-me.html#disqus-thread">Comments >></a></div>

</div>

    </div>
  
    <div>
    
    <div class="timestamp">Sunday, June  7, 2009</div>

    <h2 class="index-link"><a href="/2009/06/07/back-to-indy-for-nda.html">Back to Indy for NDA</a></h2>
    <div class="post">

  <h2>Back to Indy for NDA</h2>

<p>A few weeks back, I made my first trip to speak in Indy at the <a href="http://www.indycodecamp.org/">Indy Code Camp</a>. I had a great time, met some new people, and got invited back to speak at <a href="http://indynda.org/">IndyNDA</a> on ASP.Net MVC.</p>

<p>So, this Thursday, June 11, if you’re in the greater Indianapolis metropolitan area and want to learn a little MVC, then I hope to see you at IndyNDA.</p>

  <div class="disqus-link"><a href="http://blog.timwingfield.com/2009/06/07/back-to-indy-for-nda.html#disqus-thread">Comments >></a></div>

</div>

    </div>
  
    <div>
    
    <div class="timestamp">Sunday, May 17, 2009</div>

    <h2 class="index-link"><a href="/2009/05/17/presenting-in-findlay-this-tuesday.html">Presenting in Findlay this Tuesday</a></h2>
    <div class="post">

  <h2>Presenting in Findlay this Tuesday</h2>

<p>I can’t believe I didn’t get this blogged sooner: I’m presenting “Care About Your Craft: Adventures in the Art of Software Development” in Findlay this coming Tuesday, May 19th.</p>

<p>I’m looking forward to heading up to Findlay for this. I met a few of the <a href="http://fanug.org/default.aspx">FANUG</a> guys at Indy Code Camp this weekend, so I’ve got a few hecklers already primed.</p>

  <div class="disqus-link"><a href="http://blog.timwingfield.com/2009/05/17/presenting-in-findlay-this-tuesday.html#disqus-thread">Comments >></a></div>

</div>

    </div>
  
</div>


  <div id="pagination">
    <ol>
      
      <li>
        
        <a href="/page6" title="Go to previous page">
          &laquo; previous 
        </a>
        
      </li>
      

      
      <li>
        
          
          <a href="/">1</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page2">2</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page3">3</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page4">4</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page5">5</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page6">6</a>
          
        
      </li>
      
      <li>
        
        7
        
      </li>
      
      <li>
        
          
          <a href="/page8">8</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page9">9</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page10">10</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page11">11</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page12">12</a>
          
        
      </li>
      
      <li>
        
          
          <a href="/page13">13</a>
          
        
      </li>
      

      
      <li>
        <a href="/page8" title="Go to next page">
          next &raquo; 
        </a>
      </li>
      
    </ol>
    <div style="clear: both; height: 0px">.</div>
  </div>


<script type="text/javascript">
  $(function(){
    $(".post h2").hide();
    $(".post .timestap").hide();
  });
</script>

<script type="text/javascript">
    var disqus_shortname = 'timwingfield';

    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>


          </div>
        </div>
      </div><!-- end content -->
      
      <div id="sidebar">
        <ul>
          <li>
            <h2>Find me on...</h2>
            <ul>
              <li><a href="http://twitter.com/timwingfield">twitter</a></li>
              <li><a href="http://timwingfield.tumblr.com">tumblr</a></li>
              <li><a href="http://www.facebook.com/tim.wingfield">facebook</a></li>
              <li><a href="http://www.linkedin.com/pub/tim-wingfield/8/89/213">linkedin</a></li>
            </ul>
          </li>
          <li>
            <h2>Categories</h2>
            <ul>
            
              <li><a href="/categories/Codemash/index.html">Codemash</a></li>
            
              <li><a href="/categories/conference/index.html">conference</a></li>
            
              <li><a href="/categories/development/index.html">development</a></li>
            
              <li><a href="/categories/ajax/index.html">ajax</a></li>
            
              <li><a href="/categories/tech-fun/index.html">tech-fun</a></li>
            
              <li><a href="/categories/PragProg/index.html">PragProg</a></li>
            
              <li><a href="/categories/testing/index.html">testing</a></li>
            
              <li><a href="/categories/TDD/index.html">TDD</a></li>
            
              <li><a href="/categories/ASP.Net-MVC/index.html">ASP.Net-MVC</a></li>
            
              <li><a href="/categories/MVC/index.html">MVC</a></li>
            
              <li><a href="/categories/speaking/index.html">speaking</a></li>
            
              <li><a href="/categories/mobile/index.html">mobile</a></li>
            
              <li><a href="/categories/video/index.html">video</a></li>
            
              <li><a href="/categories/kanban/index.html">kanban</a></li>
            
              <li><a href="/categories/goals/index.html">goals</a></li>
            
              <li><a href="/categories/presentation/index.html">presentation</a></li>
            
              <li><a href="/categories/presenting/index.html">presenting</a></li>
            
              <li><a href="/categories/development-practices/index.html">development-practices</a></li>
            
              <li><a href="/categories/Rails/index.html">Rails</a></li>
            
              <li><a href="/categories/Ruby/index.html">Ruby</a></li>
            
              <li><a href="/categories/Mac/index.html">Mac</a></li>
            
              <li><a href="/categories/career/index.html">career</a></li>
            
              <li><a href="/categories/Windows/index.html">Windows</a></li>
            
              <li><a href="/categories/Lean/index.html">Lean</a></li>
            
              <li><a href="/categories/mongodb/index.html">mongodb</a></li>
            
              <li><a href="/categories/Cucumber/index.html">Cucumber</a></li>
            
              <li><a href="/categories/IronRuby/index.html">IronRuby</a></li>
            
              <li><a href="/categories/Albacore/index.html">Albacore</a></li>
            
              <li><a href="/categories/RSpec/index.html">RSpec</a></li>
            
              <li><a href="/categories/nUnit/index.html">nUnit</a></li>
            
              <li><a href="/categories/continuous-improvement/index.html">continuous-improvement</a></li>
            
              <li><a href="/categories/lean/index.html">lean</a></li>
            
              <li><a href="/categories/agile/index.html">agile</a></li>
            
              <li><a href="/categories/retrospectives/index.html">retrospectives</a></li>
            
              <li><a href="/categories/estimation/index.html">estimation</a></li>
            
              <li><a href="/categories/sizing/index.html">sizing</a></li>
            
              <li><a href="/categories/Jekyll/index.html">Jekyll</a></li>
            
              <li><a href="/categories/coaching/index.html">coaching</a></li>
            
            </ul>
          </li>
        </ul>
      </div><!-- end sidebar -->

      <div style="clear: both;">&nbsp;</div>

      <div id="footer">
        <ul id="footer-menu">
          <li class="first"><a href="/">Home</a></li>
          <li><a href="/all.html">All Posts</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/contact.html">Contact</a></li>
        </ul>   
        <p>Copyright &copy;2011 timwingfield.com. All Rights Reserved.</p>
      </div>
    </div><!-- end page -->
  </body>
</html>
